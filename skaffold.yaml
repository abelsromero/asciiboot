apiVersion: skaffold/v2beta10
kind: Config
build:
  artifacts:
    - image: asciiboot-dev
      custom:
        buildCommand: |
          echo ">>> IMAGE: $IMAGE" && ./gradlew bootBuildImage --imageName="$IMAGE"
        dependencies:
          paths:
            - src/main/**
            - build.gradle
            - settings.gradle
  tagPolicy:
    envTemplate:
      template: "0.0.1-SNAPSHOT"
  local:
    push: false
deploy:
  kubectl:
    manifests:
      - manifests/*.yaml
portForward:
  - resourceType: pod
    resourceName: asciiboot
    namespace: default
    port: 8080
